{% extends 'products/base.html' %}
{% load static %}

 

{% block contenido %}
{% if user.is_authenticated %}
<div class="button">
<a href="{% url 'crearpost'%}">
 <button type="btn btn-secondary" title="Entrada" >
      Crear Entrada de blog
 </button>
</a>
</div>
{% endif %}

<div class="contenedor" style="float:left">
{% for entrada in object_list  %}
  {% if object_list == null %}
  
   <h5 >Por ahora no hay entradas de blog</h5>
  
  {% else %}

<div class="contenedor" style="width:22rem;">
  <img src="{{entrada.imagen.url}}" class="card-img-top" width="180" height="180" alt="...">
  <div class="card-body" style="background-color:white;">
    <h5 class="card-title"  style="background-color:white;">{{entrada.titulo}}</h5>
    <p class="card-text" style="background-color:white;">{{entrada.autor}}</p>
      <!--Aqui en databstarget agrego entada id para independizar el elemento y lo enlazo con el id del dic contenido-->
      <a class="btn btn-primary" data-bs-toggle="collapse" data-bs-target="#collapseExample{{entrada.id}}"  role="button" aria-expanded="false" aria-controls="collapseExample">
        Leer mas...
      </a>
      <div class="collapse" id="collapseExample{{entrada.id}}">
        <div class="card card-body">
         {{entrada.contenido}} 
      </div>
      
    </p>
    
 </div>
  <br>
    
    {% if user.is_authenticated  %}
     {% if entrada.autor == request.user or user.is_staff %}
       <a href="{% url 'editpost' entrada.id %}">
        <button type="btn btn-primary" title="Editar" >
             Editar Entrada de blog
        </button>
       </a>
       <a href="{% url 'deletepost' entrada.id %}">
        <button type="btn btn-primary" title="Editar" >
             Eliminar Entrada
        </button>
       </a>
     {% endif %}
    {% endif %}
     
    
</div>   
{% endif %}

{% endfor %}
</div>

{% endblock contenido %}
